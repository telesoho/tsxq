# 中国象棋辅助软件 - 产品需求文档 (PRD)

## 1. 产品概述
本产品是一款运行在 Windows PC 端的中国象棋辅助软件。旨在为用户提供强大的象棋AI对弈体验，以及智能化的局势分析功能。

### 核心价值
- **强力AI陪练**: 集成开源最强象棋引擎 Pikafish，提供不同难度的对弈体验。
- **智能分析**: 能够识别屏幕上的象棋局面（如直播、网页对战平台），并给出即时的局势评估和最佳着法建议。

## 2. 阶段规划

### 第一阶段：人机对战 (MVP)
**目标**: 完成基础的象棋对弈功能，验证 UCI 引擎集成的稳定性。
- **功能列表**:
    - 完整的中国象棋棋盘与棋子 UI。
    - 集成 Pikafish 引擎 (UCI 协议)。
    - 支持人机对战（玩家执红/执黑）。
    - 悔棋、重新开始、局面重置。
    - 显示 AI 思考信息（最佳着法、思考深度、分数）。
    - 基础的引擎设置（思考时间/难度）。

### 第二阶段：屏幕识别与分析
**目标**: 实现跨应用的局面识别与辅助分析。
- **功能列表**:
    - **屏幕截取**: 框选屏幕区域进行截图。
    - **棋盘识别**: 自动识别截图中的棋子位置和局面 (FEN 串)。
    - **局势分析**: 将识别到的局面同步给 AI，显示当前局面的优劣势及推荐着法。
    - **悬浮窗模式**: 最小化主界面，以悬浮窗形式展示关键信息（推荐着法箭头、胜率）。

## 3. 功能详细说明 (第一阶段)

### 3.1 棋盘交互
- 支持点击选子、点击移动。
- 合法着法检测（基于规则）。
- 移动音效与动画。
- 最后的移动高亮显示。

### 3.2 引擎控制
- **加载引擎**: 自动加载内置的 Pikafish 引擎。
- **思考模式**:
    - 玩家走棋后，AI 自动开始思考并走棋。
    - 支持 "立即出招" 按钮，强制 AI 停止思考并走出当前最佳步。
- **信息展示**:
    - 实时显示 AI 的主要变例 (PV)。
    - 显示当前局面评分（如 +200 表示红优，-100 表示黑优）。

### 3.3 设置
- **AI 难度**: 限制思考时间或搜索深度。
- **执子选择**: 玩家选择执红（先手）或执黑（后手）。

## 4. 用户界面 (UI) 规范
- **主色调**: 传统的木纹或极简风格，保持视觉舒适。
- **布局**:
    - 左侧/中间: 大棋盘区域。
    - 右侧: 引擎信息面板（思考日志）、着法历史记录（记谱）、功能按钮区（悔棋、新局）。
